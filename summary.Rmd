---
title: "Usage statistics"
date: '`r Sys.time()`'
---

```{r read-logs, echo = FALSE}
downloads <- do.call(rbind, 
                     lapply(list.files("logs", full.names = TRUE), read.csv))
```

```{r settings, echo = FALSE}
VersionPalette <- function(minor) {
  setNames(hcl.colors(6, switch(as.character(minor),
         "3.4" = "Purp", "3.5" = "Mint", "3.6" = "Peach",
         "4.0" = "Blues", "4.1" = "Light Grays", "4.2" = "TealGrn",
         "4.3" = "BrwnYl", "4.4" = "Burg", "Reds 3")),
         paste0(minor, ".", 0:5))
}
rCols <- unlist(lapply(c(seq(3.1, 3.6, 0.1), "4.0", c(seq(4.1, 4.4, 0.1))),
                  VersionPalette))
```

# Ternary

```{r ternary, echo = FALSE}
pkg <- downloads[downloads$package == "Ternary", ]

tab <- table(pkg[, c("r_version", "date")])
barplot(tab, col = rCols[rownames(tab)], las = 2)
majors <- c(3.3, 3.4, 3.5, 3.6, "4.0", 4.1, 4.2, 4.3, 4.4)
legend("topleft", majors, pch = 15, col = rCols[paste0(majors, ".2")],
       ncol = 2)
```